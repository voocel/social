syntax = "proto3";

option go_package = "./gate";

package Gate;

service Gate {
  // 绑定用户与连接
  rpc Bind(BindRequest) returns (BindReply) {}
  // 解绑用户与连接
  rpc Unbind(UnbindRequest) returns (UnbindReply) {}
  // 推送消息
  rpc Push(PushRequest) returns (PushReply) {}
}

message BindRequest {
  int64 cid = 1; // 连接ID
  int64 uid = 2; // 用户ID
}

message BindReply {
}

message UnbindRequest {
  int64 uid = 1; // 用户ID
}

message UnbindReply {}

message PushRequest {
  string nid = 1; // 节点ID
  int64 target = 3; // 推送目标
  int32 route = 4;  // 路由
  bytes buffer = 5; // 消息内容
}

message PushReply {}
